{% extends 'base.html' %}
{% load static %}


{% block title %}Dashboard - Easytrip{% endblock %}

{% block content %}
<div style="max-width: 1200px; margin: 0 auto; padding: 4rem 2rem;">
    <!-- Dashboard Header -->
    <div
        style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 3rem; border-bottom: 1px solid var(--border-color); padding-bottom: 2rem;">
        <div>
            <h1 style="font-size: 2.5rem; margin-bottom: 0.5rem;">My Dashboard</h1>
            <p style="color: #666; font-size: 1.1rem;">Manage your saved itineraries and plan new adventures.</p>
        </div>
        <a href="{% url 'home' %}#create-trip" class="btn btn-primary dark-green-btn" style="padding: 12px 24px;">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                style="vertical-align: text-bottom; margin-right: 8px;">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            Create New Trip
        </a>
    </div>

    <!-- Trips Grid -->
    <div>
        {% if trips %}
        <h2 style="font-size: 1.5rem; margin-bottom: 1.5rem;">All Saved Trips ({{ trips.count }})</h2>
        <div class="trips-grid">
            {% for trip in trips %}
            <div class="trip-card" style="position: relative;">
                <a href="{% url 'trip_detail' trip.id %}"
                    style="display: block; color: inherit; text-decoration: none; height: 100%;">
                    <img src="{{ trip.image_url|default:'https://images.unsplash.com/photo-1559511260-66a654ae982a?auto=format&fit=crop&q=80&w=800' }}"
                        alt="{{ trip.destination }}">
                    <div class="trip-card-overlay">
                        <h4>{{ trip.title }}</h4>
                        <p>{{ trip.overview|truncatechars:100 }}</p>
                        <div class="trip-meta">
                            <span>
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                    <line x1="16" y1="2" x2="16" y2="6"></line>
                                    <line x1="8" y1="2" x2="8" y2="6"></line>
                                    <line x1="3" y1="10" x2="21" y2="10"></line>
                                </svg>
                                {{ trip.start_date|date:"F j, Y"|default:"TBD" }}
                            </span>
                            <span>
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" style="vertical-align: middle; margin-right: 4px;">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                                {{ trip.group_size|default:"2 Persons" }}
                            </span>
                        </div>
                    </div>
                </a>

                <!-- Delete Button Container -->
                <div style="position: absolute; top: 12px; right: 12px; z-index: 100;">
                    <a href="{% url 'delete_trip' trip.id %}"
                        onclick="return confirm('Are you sure you want to delete this trip?');"
                        style="background: rgba(0,0,0,0.6); color: white; border: 2px solid rgba(255,255,255,0.2); border-radius: 50%; width: 36px; height: 36px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; text-decoration: none;"
                        onmouseover="this.style.background='rgba(220,53,69,1)'; this.style.borderColor='rgba(255,255,255,0.5)'"
                        onmouseout="this.style.background='rgba(0,0,0,0.6)'; this.style.borderColor='rgba(255,255,255,0.2)'"
                        title="Delete Trip">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                            </path>
                        </svg>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div
            style="text-align: center; padding: 4rem; background-color: var(--white); border-radius: 16px; border: 1px dashed var(--border-color);">
            <div
                style="width: 64px; height: 64px; margin: 0 auto 1.5rem; background-color: var(--background); color: #888; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path
                        d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                    </path>
                </svg>
            </div>
            <h3 style="margin-bottom: 0.5rem;">No trips yet!</h3>
            <p style="color: #666; margin-bottom: 1.5rem;">You haven't planned any adventures yet. Get started by
                creating your first itinerary.</p>
            <a href="{% url 'home' %}#create-trip" class="btn btn-outline"
                style="border: 1px solid var(--border-color); padding: 10px 24px; border-radius: 20px; text-decoration: none; color: var(--text-color);">Plan
                a Trip</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}